:toc: macro
toc::[]

= Services Layer

In this chapter we are going to create service layer which exposes backend functionality via REST services with JSON transport.

== REST Service

All we need to do is creating the class `org.example.app.task.service.TaskService`

[source,java]
----
@Path("/task")
public class TaskService {
  @Inject
  private UcFindTaskList ucFindTaskList;
  // ...
  
  @GET
  @Path("/list/{id}")
  public TaskListEto findTaskList(@PathParam("id") Long id) {

    TaskListEto task = this.ucFindTaskList.findById(id);
    if (task == null) {
      throw new NotFoundException("TaskList with id " + id + " does not exist.");
    }
    return task;
  }
  // ...

}
----

== Testing of service layer

To properly test our REST service, we define a tests in the class `org.example.app.task.service.TaskServiceTest`:

[source,java]
----
@QuarkusTest
public class TaskServiceTest extends Assertions {

  /** Test of {@link TaskService#findTaskList(Long)}. */
  @Test
  public void testFindTaskList() {

    given().when().get("/task/list/1").then().statusCode(200)
        .body(is("{\"id\":1,\"version\":0,\"title\":\"Shopping List\"}"));
  }

  // ... test other service operations here ...

}
----
